<!-- {% extends 'base.html' %} -->
{% load static %}

{% block content %}
<button>룸메추천받기</button>
<button>필터적용하기</button>
<!-- 필터 -->
<small>*내가 원하는 룸메에 대해 적어주세요</small>
<div>
    
</div>


<div>
    <div>
        <h3>룸메 찾기</h3>
    </div>
    <div>
        <form action="" method="GET">
            {% csrf_token %}
            <p>필터적용하기</p>
            <!-- 필터를 보이게 하는 버튼 -->
            <input type="button" value="˅" id="down" onclick="showfilter()" >
            <!-- 필터를 숨기는 버튼 -->
            <input type="button" value="˄" id="up" onclick="hidefilter()" >
            <div id="filter">
                <form action="">

                    <div class="essential">
                        <div class="filter_grade">
                            <h6 class="title">학년</h6>
                            <div class="answer">
                                <select name="grad_start" id="">
                                    <option value="">------</option>
                                    <option value="1">1학년</option>
                                    <option value="2">2학년</option>
                                    <option value="3">3학년</option>
                                    <option value="4">4학년</option>
                                    <option value="5">5학년</option>
                                    <option value="6">6학년</option>
                                </select>
                                <span>~</span>
                                <select name="grade_end" id="">
                                    <option value="">------</option>
                                    <option value="1">1학년</option>
                                    <option value="2">2학년</option>
                                    <option value="3">3학년</option>
                                    <option value="4">4학년</option>
                                    <option value="5">5학년</option>
                                    <option value="6">6학년</option>
                                </select>
                            </div>
                        </div>
                        <div class="filter_room_type">
                            <h6 class="title">기숙사 or 자취</h6>
                            <div class="answer">
                                <input type="radio" id="room_type_0" name="room_type" value="0"><label for="room_type_0">기숙사</label>
                                <input type="radio" id="room_type_1" name="room_type" value="1"><label for="room_type_1">자취</label>
                            </div>
                        </div>
                        <div class="filter_dormitory_number">
                            <h6 class="title">기숙사 동</h6>
                            <div class="answer">
                                {% if user.user_gender == "남" %}
                                <select name="dormitory_number_man" id="">
                                    <option value="">------</option>
                                    <option value="10">10동</option>
                                    <option value="8">8동</option>
                                    <option value="6">6동</option>
                                    <option value="3">3동</option>
                                    <option value="2">2동</option>
                                    <option value="1">1동</option>
                                </select>
                                {% elif user.user_gender == "여" %}
                                <select name="dormitory_number_woman" id="">
                                    <option value="">------</option>
                                    <option value="11">11동</option>
                                    <option value="9">9동</option>
                                    <option value="7">7동</option>
                                    <option value="5">5동</option>
                                    <option value="4">4동</option>
                                </select>
                                {% else %}
                                <select name="dormitory_number" id="">
                                    <option value="">------</option>
                                    <option value="11">11동</option>
                                    <option value="10">10동</option>
                                    <option value="9">9동</option>
                                    <option value="8">8동</option>
                                    <option value="7">7동</option>
                                    <option value="6">6동</option>
                                    <option value="5">5동</option>
                                    <option value="4">4동</option>
                                    <option value="3">3동</option>
                                    <option value="2">2동</option>
                                    <option value="1">1동</option>
                                </select>
                                {% endif %}
                            </div>
                        </div>
                        <div class="question dormitory_date">
                            <h6 class="title">기간</h6>
                            <div class="answer">
                                <select name="dormitory_year_start">
                                    <option value="">------</option>
                                    <option value="2021">2021</option>
                                    <option value="2022">2022</option>
                                </select>
                                <select name="dormitory_semester_start">
                                    <option value="">------</option>
                                    <option value="1" disabled>1학기</option>
                                    <option value="S" disabled>여름방학</option>
                                    <option value="2">2학기</option>
                                    <option value="W">겨울방학</option>
                                </select>
                                <span>~</span>
                                <select name="dormitory_year_end">
                                    <option value="">------</option>
                                    <option value="2021">2021</option>
                                    <option value="2022">2022</option>
                                    <option value="2023">2024</option>
                                </select>
                                <select name="dormitory_semester_end">
                                    <option value="">------</option>
                                    <option value="1">1학기</option>
                                    <option value="S">여름방학</option>
                                    <option value="2">2학기</option>
                                    <option value="W">겨울방학</option>
                                </select>
                            </div>
                        </div>
                        <div class="filter_relationship">
                            <h6 class="title">룸메와의 관계</h6>
                            <div class="answer">
                                <input type="radio" id="friendly" name="relationship" value="0"><label for="friendly">친하게</label>
                                <input type="radio" id="business" name="relationship" value="1"><label for="business">인사만</label>
                            </div>
                        </div>
                        <div class="filter_wakup_time">
                            <h6 class="title">기상시간</h6>
                            <div class="answer">
                                <input type="time" step='3600' id="start_wakeup" name="start_wakeup_time">
                                <span>~</span>
                                <input type="time" step='3600' id="end_wakeup" name="end_wakeup_time">
                            </div>
                        </div>
                        <div class="filter_bed_time">
                            <h6 class="title">기상시간</h6>
                            <div class="answer">
                                <input type="time" step='3600' id="start_bedtime" name="start_bed_time">
                                <span>~</span>
                                <input type="time" step='3600' id="end_bedtime" name="end_bed_time">
                            </div>
                        </div>
                        <div class="filter_smoke">
                            <h6 class="title">흡연</h6>
                            <div class="answer">
                                <input type="radio" id="nonsmoker" name="smoke" value="0"><label for="nonsmoker">비흡연자</label>
                                <input type="radio" id="smoker" name="smoke" value="1"><label for="smoker">흡연자</label>
                            </div>
                        </div>
                        <div class="filter_cleaning">
                            <h6 class="title">청소주기</h6>
                            <div class="answer">
                                <select name="cleaning">
                                    <option value="">------</option>
                                    <option value="0">안함</option>
                                    <option value="1">한달1회</option>
                                    <option value="2">격주1회</option>
                                    <option value="3">주1회</option>
                                    <option value="4">주3~4회</option>
                                    <option value="5">매일</option>
                                </select>
                            </div>
                        </div>
                        <div class="filter_sleeping_habits">
                            <h6 class="title">잠버릇</h6>
                            <div class="answer">
                                <input type="checkbox" id="snoring" name="sleeping_habits_snoring" value="True"><label for="snoring">코골이</label>
                                <input type="checkbox" id="grinding_teeth" name="sleeping_habits_teeth" value="True"><label for="grinding_teeth">이갈이</label>
                                <input type="checkbox" id="nothing" name="sleeping_habits_nothing" value="True"><label for="nothing">없음</label>
                            </div>
                        </div>
                        <div class="filter_invite_friends">
                            <h6 class="title">친구 초대</h6>
                            <div class="answer">
                                <input type="radio" id="invite_friends_yes" name="invite_friends" value="True"><label for="invite_friends_yes">예</label>
                                <input type="radio" id="invite_friends_no" name="invite_friends" value="False"><label for="invite_friends_no">아니요</label>
                            </div>
                        </div>
                        <div class="filter_call">
                            <h6 class="title">실내 통화</h6>
                            <div class="answer">
                                <input type="radio" id="call_yes" name="call" value='0'><label for="call_yes">예</label>
                                <input type="radio" id="call_no" name="call" value='1'><label for="call_no">아니요</label>
                                <input type="radio" id="call_short" name="call" value='2'><label for="call_short">짧은통화만</label>
                            </div>
                        </div>
                        <div class="filter_earphones">
                            <h6 class="title">이어폰 사용</h6>
                            <div class="answer">
                                <input type="radio" id="earphones_yes" name="earphones" value="True"><label for="earphones_yes">필수</label>
                                <input type="radio" id="earphones_no" name="earphones" value="False"><label for="earphones_no">사용한함</label>
                            </div>
                        </div>
                        <div class="filter_eat">
                            <h6 class="title">실내취식</h6>
                            <div class="answer">
                                <input type="radio" id="eat_yes" name="eat" value='0'><label for="eat_yes">먹음</label>
                                <input type="radio" id="eat_snack" name="eat" value='1'><label for="eat_snack">간식만</label>
                                <input type="radio" id="eat_no" name="eat" value='2'><label for="eat_no">먹지 않음</label>
                            </div>
                        </div>
                        <div class="filter_animal">
                            <h6 class="title">반려동물</h6>
                            <div class="answer">
                                <input type="checkbox" id="animal_dog" name="animal" value='0'><label for="animal_dog">강아지</label>
                                <input type="checkbox" id="animal_cat" name="animal" value='1'><label for="aniaml_cat">고양이</label>
                            </div>
                        </div>
                    </div>

                    <div class="optional">
                        <div class="filter_share">
                            <h6 class="title">생필품</h6>
                            <div class="answer">
                                <input type="radio" id="share_yes" name="share" value='0'><label for="share_yes">공유</label>
                                <input type="radio" id="share_no" name="share" value='1'><label for="share_snack">각자</label>
                            </div>
                        </div>
                        <div class="filter_toilet">
                            <h6 class="title">화장실 청소</h6>
                            <div class="answer">
                                <select name="toilet">
                                    <option value="">------</option>
                                    <option value="0">안함</option>
                                    <option value="1">한달1회</option>
                                    <option value="2">격주1회</option>
                                    <option value="3">주1회</option>
                                    <option value="4">주3~4회</option>
                                    <option value="5">매일</option>
                                </select>
                            </div>
                        </div>
                        <div class="filter_ventilate" >
                            <h6 class="title">환기</h6>
                            <div class="answer">
                                <select name="ventilate">
                                    <option value="">------</option>
                                    <option value="0">안함</option>
                                    <option value="1">1일1회</option>
                                    <option value="2">1일2회</option>
                                    <option value="3">1일3회</option>
                                    <option value="4">1일4회</option>
                                    <option value="5">수시</option>
                                </select>
                            </div>
                        </div>
                        <div class="filter_feel">
                            <h6 class="title">온도</h6>
                            <div class="answer">
                                <input type="checkbox" id="feel_cold" name="feel_cold" value="False"><label for="feel_cold">추위를 많이 탐</label>
                                <input type="checkbox" id="feel_hot" name="feel_hot" value="False"><label for="feel_hot">더위를 많이 탐</label>
                            </div>
                        </div>
                        <div class="filter_bug">
                            <h6 class="title">벌레 퇴치</h6>
                            <div class="answer">
                                <input type="radio" id="bug_yes" name="bug" value="0"><label for="bug_yes">잘잡음</label>
                                <input type="radio" id="bug_no" name="bug" value="1"><label for="bug_snack">못잡음</label>
                            </div>
                        </div>
                        <div class="filter_keyboard">
                            <h6 class="title">키보드 소리</h6>
                            <div class="answer">
                                <input type="radio" id="keyboard_loud" name="keyboard" value="0"><label for="keyboard_loud">타이핑&게임 자주함</label>
                                <input type="radio" id="keyboard_no" name="keyboard" value="1"><label for="keyboard_no">거의 안함</label>
                                <input type="checkbox" id="keyboard_noise" name="keyboard_checkbox" value="True"><label for="keyboard_noise">저소음 키보드 사용중</label>
                            </div>
                        </div>
                        <div class="filter_game">
                            <h6 class="title">게임여부</h6>
                            <div class="answer">
                                <input type="radio" id="game_yes" name="game" value="0"><label for="game_yes">자주</label>
                                <input type="radio" id="game_sometimes" name="game" value="1"><label for="game_sometimes">가끔</label>
                                <input type="radio" id="game_no" name="game" value="2"><label for="game_no">안 함</label>
                            </div>
                        </div>
                        <div class="filter_mbti">
                            <h6 class="title">MBTI</h6>
                            <div class="answer">
                                <select name="mbti">
                                    <option value="">--------</option>
                                    <option value="ESTJ">ESTJ</option>
                                    <option value="ESTP">ESTP</option>
                                    <option value="ESFJ" >ESFJ</option>
                                    <option value="ESFP">ESFP</option>
                                    <option value="ENTJ">ENTJ</option>
                                    <option value="ENTP">ENTP</option>
                                    <option value="ENFJ" >ENFJ</option>
                                    <option value="ENFP">ENFP</option>
                                    <option value="ISTJ">ISTJ</option>
                                    <option value="ISTP">ISTP</option>
                                    <option value="ISFJ" >ISFJ</option>
                                    <option value="ISFP">ISFP</option>
                                    <option value="INTJ">INTJ</option>
                                    <option value="INTP">INTP</option>
                                    <option value="INFJ" >INFJ</option>
                                    <option value="INFP">INFP</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <!-- 버튼 안보임 -->
                    <button type="submit">적용하기</button>
                </form>
            </div>
            
            
            <div>
                <h2>검색</h2>
                <div>
                    <input type="text" name="search_keyword" value="{{ search_keyword }}" placeholder="검색어를 입력해주세요">
                </div>
                <div>
                    <button type="submit">검색</button>
                </div>
            </div>
        </form>
    </div>
    {% if search_keyword %}
    <h5> &nbsp; '{{ search_keyword }}' 검색 결과입니다</h5>
    {% endif %}
    <div>
        <table>
            <thead>
                <tr>
                    <th>상태</th>
                    <th>기숙사/자취</th>
                    <th>성별</th>
                    <th>나이</th>
                    <th>제목</th>
                    <!-- <th>적합도</th> 구현X -->
                </tr>
            </thead>
            <tbody>
                {% if writes %}
                {% for write in writes.all %}
                <tr>
                    <td>{{ write.state}}</td>
                    <td>{{ write.user_id.survey_ess_id.room_type}}</td>
                    <td>{{ write.user_id.user_gender}}</td>
                    <!-- 나이모델X학년으로 적어둠 -->
                    <td>{{ write.user_id.survey_ess_id.grade}}학년</td>
                    <td><a href="{% url 'detail' write.id %}">{{ write.title }}</td>
                    <!-- <td> 적합도 구현X </td> -->
                </tr>
                {% endfor %}
                {% else %}
                    {% if search_keyword %}
                    <tr>
                        <td>일치하는 검색 결과가 없습니다</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td>작성된 게시글이 없습니다</td>
                    </tr>
                    {% endif %}
                {% endif %}
            </tbody>
        </table>
    </div>
</div>

<div>
    <a href="{% url 'create' %}">새로 만들기</a>
</div>

<div>
    <ul class="pagination">
        <li class="page_item"><a class="page_link" href="#">◀</a></li>
        <li class="page_item"><a class="page_link" href="#">1</a></li>
        <li class="page_item"><a class="page_link" href="#">2</a></li>
        <li class="page_item"><a class="page_link" href="#">3</a></li>
        <li class="page_item"><a class="page_link" href="#">4</a></li>
        <li class="page_item"><a class="page_link" href="#">5</a></li>
        <li class="page_item"><a class="page_link" href="#">▶</a></li>
    </ul>
</div>
<img class="open" id="jsBtn" src="{% static 'img/chat_icon.png' %}" alt="">
<div class="modal hidden" id="jsModal">
    <button class="modal__closeBtn" id="jsCloseBtn">X</button>
</div>


<script>
    const open = document.querySelector(".open");
    const close = document.querySelector(".modal__closeBtn");
    const modal = document.querySelector(".modal");
    filter.style.display='none'
    up.style.display='none'
    

    function init(){
        open.addEventListener("click",function(){
            modal.classList.remove("hidden");
        });
        close.addEventListener("click",function(){
            modal.classList.add("hidden");
        });
    }

    init();
    function hidefilter(){
        document.getElementById("filter").style.display = "none";
        document.getElementById("up").style.display = "none"
        document.getElementById("down").style.display = "block"
    }
    function showfilter(){
        document.getElementById("filter").style.display = "block"
        document.getElementById("down").style.display = "none"
        document.getElementById("up").style.display = "block"
    }
    
</script>
{% endblock %}